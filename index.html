<!DOCTYPE html>

<html lang="en">
<head>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Gulf Shores Family Getaway</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Baloo 2', sans-serif;
    margin: 0;
    padding: 20px;
    background: linear-gradient(to bottom, #fff7e6, #e0f7ff); /* Sand to sky */
    color: #333;
}
        }
        h1 {
            text-align: center;
            font-size: 1.8em;
        }
        h2 {
            font-size: 1.4em;
            margin-top: 40px;
        }
        .trip-date {
            text-align: center;
            color: #666;
        }
        .day-section {
            margin: 30px auto;
            max-width: 700px;
        }
        .day-section img {
            width: 100%;
            border-radius: 10px;
            margin: 10px 0;
        }
        ul {
            padding-left: 20px;
        }
        li {
            margin-bottom: 6px;
        }
        .button-wrapper {
            text-align: center;
            margin: 20px 0;
        }
        .button-wrapper img {
            width: 260px;
            cursor: pointer;
        }
        a {
            color: #0077cc;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
<div style="text-align: center; margin-top: 10px;">
  <img src="Header Logo.png" alt="Gulf Shores Roadtrip" style="max-width: 100%; height: auto; width: 375px;">
</div>
<div class="button-wrapper" style="
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 30px;
  flex-wrap: nowrap;
  flex-shrink: 1;
  flex-grow: 0;
  overflow-x: auto;
  padding: 10px 0;
">

  <!-- Full Itinerary -->
  <a href="full_itinerary_gulf_shores.html" style="display: block; width: 120px;">
    <img src="full_itinerary_button_final.png" alt="Full Itinerary" 
         style="width: 100%; height: auto; transition: transform 0.25s ease;"
         onmouseover="this.style.transform='scale(1.1)'" 
         onmouseout="this.style.transform='scale(1)'">
  </a>

  <!-- Along the Way -->
  <a href="along_the_way.html" style="display: block; width: 120px;">
    <img src="along_the_way_button_final.png" alt="Along the Way" 
         style="width: 100%; height: auto; transition: transform 0.25s ease;"
         onmouseover="this.style.transform='scale(1.1)'" 
         onmouseout="this.style.transform='scale(1)'">
  </a>

  <!-- Packing -->
  <a href="packing.html" style="display: block; width: 120px;">
    <img src="packing_button_final.png" alt="Packing List" 
         style="width: 100%; height: auto; transition: transform 0.25s ease;"
         onmouseover="this.style.transform='scale(1.1)'" 
         onmouseout="this.style.transform='scale(1)'">
  </a>

</div>
</a>
</div>
<section id="music-section" style="text-align:center; margin-top: 40px;">
  <h2>üéµ Your Roadtrip Soundtrack</h2>
  <p>Loading playlist based on your current location...</p>
  <p id="coords" style="color:#888; font-size:0.9em;"></p>
  <div id="player-container" style="margin-top: 20px;"></div>
</section>

<script>
  const playlists = {
    newalbany: {
      url: "https://open.spotify.com/playlist/37i9dQZF1DWZIQ6QMQeU3v",
      label: "Feelin' Good ‚Äì New Albany"
    },
    lexington: {
      url: "https://open.spotify.com/playlist/37i9dQZF1DX2RxBh64BHjQ",
      label: "Acoustic Chill ‚Äì Lexington"
    },
    nashville: {
      url: "https://open.spotify.com/playlist/37i9dQZF1DWWv6MSZULLBi",
      label: "Indie Twang ‚Äì Nashville"
    },
    montgomery: {
      url: "https://open.spotify.com/playlist/37i9dQZF1DXd9rSDyQguIk",
      label: "Southern Soul BBQ ‚Äì Montgomery"
    },
    gatlinburg: {
      url: "https://open.spotify.com/playlist/37i9dQZF1DX1tyCD9QhIWF",
      label: "Mountain Vibes ‚Äì Gatlinburg"
    },
    birmingham: {
      url: "https://open.spotify.com/playlist/37i9dQZF1DX6FeZRdFM7yW",
      label: "Southern Rock ‚Äì Birmingham"
    },
    gulfshores: {
      url: "https://open.spotify.com/playlist/37i9dQZF1DX0SM0LYsmbMT",
      label: "Beach Vibes ‚Äì Gulf Shores"
    },
    fallback: {
      url: "https://open.spotify.com/playlist/37i9dQZF1DX3rxVfibe1L0",
      label: "General Roadtrip Playlist"
    }
  };

  function matchLocation(lat, lon) {
    console.log(`Detected location: lat=${lat}, lon=${lon}`);
    const coordsElement = document.getElementById("coords");
    if (coordsElement) {
      coordsElement.innerText = `Detected location: ${lat.toFixed(4)}, ${lon.toFixed(4)}`;
    }

    if (lat > 38.2 && lat < 38.4 && lon > -85.9 && lon < -85.5) return "newalbany";
    if (lat > 38.0 && lat < 38.1 && lon > -84.6 && lon < -84.4) return "lexington";
    if (lat > 36.0 && lat < 36.2 && lon > -86.9 && lon < -86.6) return "nashville";
    if (lat > 32.3 && lat < 32.5 && lon > -86.4 && lon < -86.1) return "montgomery";
    if (lat > 35.6 && lat < 35.8 && lon > -83.6 && lon < -83.4) return "gatlinburg";
    if (lat > 33.4 && lat < 33.6 && lon > -86.9 && lon < -86.7) return "birmingham";
    if (lat > 30.2 && lat < 30.4 && lon > -87.7 && lon < -87.5) return "gulfshores";

    return "fallback";
  }

  function renderAllPlaylists(matchingKey) {
    const container = document.getElementById('player-container');
    container.innerHTML = '';

    Object.keys(playlists).forEach((key) => {
      const { url, label } = playlists[key];
      const isCurrent = key === matchingKey;
      const row = document.createElement('div');
      row.style.display = "flex";
      row.style.alignItems = "center";
      row.style.justifyContent = "center";
      row.style.gap = "12px";
      row.style.marginBottom = "10px";
      row.style.flexWrap = "wrap";

      const text = document.createElement('span');
      text.textContent = `${isCurrent ? '‚≠ê ' : ''}${label}`;
      text.style.fontWeight = isCurrent ? "bold" : "normal";

      const button = document.createElement('a');
      button.href = url;
      button.target = "_blank";
      button.innerHTML = `<img src="open_in_spotify.png" alt="Open in Spotify" style="width: 28px; cursor: pointer;">`;

      row.appendChild(text);
      row.appendChild(button);
      container.appendChild(row);
    });
  }

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      (position) => {
        const key = matchLocation(position.coords.latitude, position.coords.longitude);
        renderAllPlaylists(key);
      },
      () => {
        console.warn("Geolocation failed. Using fallback.");
        renderAllPlaylists("fallback");
      }
    );
  } else {
    console.warn("Geolocation not supported. Using fallback.");
    renderAllPlaylists("fallback");
  }
</script>

</body>
</html>
